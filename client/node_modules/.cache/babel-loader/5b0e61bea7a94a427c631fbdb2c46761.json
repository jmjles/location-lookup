{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Loader =\n/** @class */\nfunction () {\n  function Loader(apiKey, options) {\n    if (apiKey === void 0) {\n      apiKey = null;\n    }\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.apiKey = apiKey;\n    this.options = options;\n\n    if (typeof window === 'undefined') {\n      throw new Error('google-maps is supported only in browser environment');\n    }\n  }\n\n  Loader.prototype.load = function () {\n    var _this = this;\n\n    if (typeof this.api !== 'undefined') {\n      return Promise.resolve(this.api);\n    }\n\n    if (typeof this.loader !== 'undefined') {\n      return this.loader;\n    }\n\n    window[Loader.CALLBACK_NAME] = function () {\n      _this.api = window['google'];\n\n      if (typeof _this.resolve === 'undefined') {\n        throw new Error('Should not happen');\n      }\n\n      _this.resolve(_this.api);\n    };\n\n    window['gm_authFailure'] = function () {\n      if (typeof _this.reject === 'undefined') {\n        throw new Error('Should not happen');\n      }\n\n      _this.reject(new Error('google-maps: authentication error'));\n    };\n\n    return this.loader = new Promise(function (resolve, reject) {\n      _this.resolve = resolve;\n      _this.reject = reject;\n      var script = document.createElement('script');\n      script.src = _this.createUrl();\n      script.async = true;\n\n      script.onerror = function (e) {\n        return reject(e);\n      };\n\n      document.head.appendChild(script);\n    });\n  };\n\n  Loader.prototype.createUrl = function () {\n    var parameters = [\"callback=\" + Loader.CALLBACK_NAME];\n\n    if (this.apiKey) {\n      parameters.push(\"key=\" + this.apiKey);\n    }\n\n    for (var name_1 in this.options) {\n      if (this.options.hasOwnProperty(name_1)) {\n        var value = this.options[name_1];\n\n        if (name_1 === 'version') {\n          name_1 = 'v';\n        }\n\n        if (name_1 === 'libraries') {\n          value = value.join(',');\n        }\n\n        parameters.push(name_1 + \"=\" + value);\n      }\n    }\n\n    return \"//maps.googleapis.com/maps/api/js?\" + parameters.join('&');\n  };\n\n  Loader.CALLBACK_NAME = '_dk_google_maps_loader_cb';\n  return Loader;\n}();\n\nexports.Loader = Loader;","map":{"version":3,"sources":["../src/loader.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Loader = /** @class */ (function () {\n    function Loader(apiKey, options) {\n        if (apiKey === void 0) { apiKey = null; }\n        if (options === void 0) { options = {}; }\n        this.apiKey = apiKey;\n        this.options = options;\n        if (typeof window === 'undefined') {\n            throw new Error('google-maps is supported only in browser environment');\n        }\n    }\n    Loader.prototype.load = function () {\n        var _this = this;\n        if (typeof this.api !== 'undefined') {\n            return Promise.resolve(this.api);\n        }\n        if (typeof this.loader !== 'undefined') {\n            return this.loader;\n        }\n        window[Loader.CALLBACK_NAME] = function () {\n            _this.api = window['google'];\n            if (typeof _this.resolve === 'undefined') {\n                throw new Error('Should not happen');\n            }\n            _this.resolve(_this.api);\n        };\n        window['gm_authFailure'] = function () {\n            if (typeof _this.reject === 'undefined') {\n                throw new Error('Should not happen');\n            }\n            _this.reject(new Error('google-maps: authentication error'));\n        };\n        return this.loader = new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n            var script = document.createElement('script');\n            script.src = _this.createUrl();\n            script.async = true;\n            script.onerror = function (e) { return reject(e); };\n            document.head.appendChild(script);\n        });\n    };\n    Loader.prototype.createUrl = function () {\n        var parameters = [\n            \"callback=\" + Loader.CALLBACK_NAME,\n        ];\n        if (this.apiKey) {\n            parameters.push(\"key=\" + this.apiKey);\n        }\n        for (var name_1 in this.options) {\n            if (this.options.hasOwnProperty(name_1)) {\n                var value = this.options[name_1];\n                if (name_1 === 'version') {\n                    name_1 = 'v';\n                }\n                if (name_1 === 'libraries') {\n                    value = value.join(',');\n                }\n                parameters.push(name_1 + \"=\" + value);\n            }\n        }\n        return \"//maps.googleapis.com/maps/api/js?\" + parameters.join('&');\n    };\n    Loader.CALLBACK_NAME = '_dk_google_maps_loader_cb';\n    return Loader;\n}());\nexports.Loader = Loader;\n//# sourceMappingURL=loader.js.map"]},"metadata":{},"sourceType":"script"}